import { useState } from "react";

const VIRTUES = [
  "ê°ì‚¬", "ê²°ì˜", "ê²¸ì†", "ê´€ìš©", "ê·¼ë©´", "ê¸°êº¼ì´í•¨", "ê¸°ì§€", "ëˆê¸°",
  "ë„ˆê·¸ëŸ¬ì›€", "ë„ì›€", "ëª…ì˜ˆ", "ëª©ì ì˜ì‹", "ë¯¿ìŒì§í•¨", "ë°°ë ¤", "ë´‰ì‚¬", "ì‚¬ë‘",
  "ì‚¬ë ¤", "ìƒëƒ¥í•¨", "ì†Œì‹ ", "ì‹ ë¢°", "ì‹ ìš©", "ì—´ì •", "ì˜ˆì˜", "ìš©ê¸°",
  "ìš°ì˜", "ìœ ì—°ì„±", "ì´ìƒí’ˆê¸°", "ì´í•´", "ì¸ë‚´", "ì¸ì •", "ììœ¨", "ì ˆë„",
  "ì •ë„", "ì •ì˜ë¡œì›€", "ì •ì§", "ì¡´ì¤‘", "ì¤‘ìš©", "ì§„ì‹¤í•¨", "ì°½ì˜ì„±", "ì±…ì„ê°",
  "ì²­ê²°", "ì´ˆì—°", "ì¶©ì§", "ì¹œì ˆ", "íƒì›”í•¨", "í‰ì˜¨í•¨", "í•œê²°ê°™ìŒ", "í—Œì‹ ",
  "í˜„ëª…í•¨", "í˜‘ë™", "í™”í•©", "í™•ì‹ "
];

const VIRTUE_MEANINGS = {
  ê°ì‚¬: "ê³ ë§ˆìš´ ë§ˆìŒì„ í‘œí˜„í•˜ëŠ” ê±°ì˜ˆìš”.",
  ì‚¬ë‘: "ë‹¤ë¥¸ ì‚¬ëŒì„ ë”°ëœ»í•˜ê²Œ ì•„ë¼ëŠ” ë§ˆìŒì´ì—ìš”.",
  ìš©ê¸°: "ë¬´ì„œìš¸ ë•Œë„ ì˜¬ë°”ë¥¸ ì¼ì„ ì„ íƒí•˜ëŠ” í˜ì´ì—ìš”.",
  ì •ì§: "ê±°ì§“ë§í•˜ì§€ ì•Šê³  ì§„ì‹¤ì„ ë§í•˜ëŠ” íƒœë„ì˜ˆìš”.",
  ë°°ë ¤: "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë§ˆìŒì„ ë¨¼ì € ìƒê°í•˜ëŠ” ê±°ì˜ˆìš”."
};

const SAMPLE_MESSAGES = {
  ê°ì‚¬: ["ì˜¤ëŠ˜ë„ ë‹¹ì‹  ë•ë¶„ì— ì„¸ìƒì´ ë” ë”°ëœ»í•´ì¡Œì–´ìš”.", "ë‹¹ì‹ ì˜ ë§ˆìŒì´ ì°¸ ê³ ë§ˆì›Œìš”.", "ê°ì‚¬ë¥¼ í‘œí˜„í•˜ëŠ” ë‹¹ì‹ ì´ ì •ë§ ë©‹ì ¸ìš”."],
  ì‚¬ë‘: ["ë‹¹ì‹ ì˜ ì‚¬ë‘ì€ ëˆ„êµ°ê°€ì—ê²Œ í° í˜ì´ ë©ë‹ˆë‹¤.", "ë§ˆìŒ ê¹Šì€ ê³³ì˜ ì‚¬ë‘ì´ ëŠê»´ì ¸ìš”.", "ì‚¬ë‘ì„ ì „í•˜ëŠ” ë‹¹ì‹ ì´ ì°¸ ì†Œì¤‘í•´ìš”."],
  ìš©ê¸°: ["ë‘ë ¤ì›€ì„ ì•ˆê³ ë„ ë‚˜ì•„ê°€ëŠ” ë‹¹ì‹ , ì •ë§ ìš©ê°í•´ìš”.", "ì‘ì€ ìš©ê¸°ê°€ í° ë³€í™”ë¥¼ ë§Œë“¤ì–´ìš”.", "ë‹¹ì‹ ì˜ ìš©ê¸°ì— ë°•ìˆ˜ë¥¼ ë³´ëƒ…ë‹ˆë‹¤."],
  ì •ì§: ["ì§„ì‹¤ëœ ë‹¹ì‹ ì˜ ëª¨ìŠµì´ ë©‹ì ¸ìš”.", "ì •ì§ì€ ì‚¬ëŒë“¤ì˜ ì‹ ë¢°ë¥¼ ì–»ëŠ” ì—´ì‡ ì˜ˆìš”.", "ë‹¹ì‹ ì˜ ì†”ì§í•¨ì´ ë¹›ë‚˜ìš”."],
  ë°°ë ¤: ["ë‹¤ë¥¸ ì‚¬ëŒì„ ìƒê°í•˜ëŠ” ë‹¹ì‹ , ì°¸ ë”°ëœ»í•´ìš”.", "ë‹¹ì‹  ë•ë¶„ì— ëˆ„êµ°ê°€ëŠ” ì›ƒì„ ìˆ˜ ìˆì—ˆì–´ìš”.", "ë°°ë ¤ì‹¬ ìˆëŠ” ë‹¹ì‹ ì´ ìë‘ìŠ¤ëŸ¬ì›Œìš”."]
};

export default function App() {
  const [name, setName] = useState("");
  const [entered, setEntered] = useState(false);
  const [selectedVirtue, setSelectedVirtue] = useState("");
  const [suggestions, setSuggestions] = useState([]);
  const [finalMessage, setFinalMessage] = useState("");
  const [meaning, setMeaning] = useState("");

  const handleSend = () => {
    if (!selectedVirtue) return;
    const messages = SAMPLE_MESSAGES[selectedVirtue] || [
      `${selectedVirtue}ì˜ ë§ˆìŒì´ ì˜¤ëŠ˜ì˜ ë‹¹ì‹ ì„ ë¹›ë‚˜ê²Œ í•´ìš”.`,
      `ë‹¹ì‹ ì€ ${selectedVirtue}ì˜ ë³´ì„ì„ ì§€ë‹Œ ë©‹ì§„ ì‚¬ëŒì´ì—ìš”.`,
      `${selectedVirtue}ì„(ë¥¼) ì „í•˜ëŠ” ë‹¹ì‹ ì´ ìë‘ìŠ¤ëŸ¬ì›Œìš”.`
    ];
    const explain = VIRTUE_MEANINGS[selectedVirtue] || `${selectedVirtue}ëŠ” ì¢‹ì€ ì„±í’ˆì„ ê°€ì§„ í–‰ë™ì´ì—ìš”.`;
    setMeaning(explain);
    setSuggestions(messages);
    setFinalMessage("");
  };

  const handleFinalSelection = (msg) => {
    setFinalMessage(msg);
    setSuggestions([]);
  };

  if (!entered) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 flex flex-col items-center justify-center p-6">
        <h1 className="text-2xl font-bold text-purple-700 mb-4">ë¯¸ë•ì˜ ë³´ì„ ëŒ€í™” ğŸ’</h1>
        <input
          type="text"
          className="p-3 rounded-xl border border-purple-300 mb-4 w-full max-w-sm"
          placeholder="ë‹¹ì‹ ì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
          value={name}
          onChange={(e) => setName(e.target.value)}
        />
        <button
          className="bg-purple-500 text-white font-semibold rounded-xl px-6 py-3 hover:bg-purple-600"
          onClick={() => setEntered(true)}
          disabled={!name.trim()}
        >
          ì‹œì‘í•˜ê¸°
        </button>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 p-6 flex flex-col items-center">
      <h1 className="text-3xl font-bold text-purple-700 mb-6">{name}ë‹˜ì˜ ë¯¸ë•ì˜ ë³´ì„ ğŸ’</h1>
      <div className="w-full max-w-xl space-y-4">
        <select
          className="w-full p-3 rounded-xl border border-purple-300"
          value={selectedVirtue}
          onChange={(e) => setSelectedVirtue(e.target.value)}
        >
          <option value="">-- ë¯¸ë•ì„ ì„ íƒí•˜ì„¸ìš” --</option>
          {VIRTUES.map((virtue) => (
            <option key={virtue} value={virtue}>
              {virtue}
            </option>
          ))}
        </select>
        <button
          className="w-full bg-purple-500 text-white font-semibold rounded-xl py-3 hover:bg-purple-600"
          onClick={handleSend}
        >
          ë³´ì„ ë³´ë‚´ê¸°
        </button>

        {meaning && (
          <div className="bg-white rounded-xl shadow-md p-4 text-center text-sm text-gray-700">
            âœ¨ <strong>{selectedVirtue}</strong>ë€? {meaning}
          </div>
        )}

        {suggestions.length > 0 && (
          <div className="bg-white rounded-2xl shadow-lg p-4 space-y-2">
            <p className="font-semibold text-gray-700">ğŸ’ ì˜¤ëŠ˜ì˜ ë‚˜ì˜ ë³´ì„ ë¬¸ì¥ì„ ì„ íƒí•´ìš”:</p>
            {suggestions.map((msg, idx) => (
              <button
                key={idx}
                onClick={() => handleFinalSelection(msg)}
                className="block w-full text-left px-4 py-2 bg-gradient-to-r from-purple-200 to-pink-200 rounded-xl hover:shadow-md"
              >
                {msg}
              </button>
            ))}
          </div>
        )}

        {finalMessage && (
          <div className="mt-10 p-8 bg-yellow-200 rounded-3xl text-center text-xl shadow-2xl border-4 border-yellow-300">
            ğŸ’– <strong className="text-2xl text-purple-800">{name}</strong>ë‹˜ì—ê²Œ ë³´ë‚´ëŠ” ë³´ì„ ê°™ì€ ë§<br /><br />
            <span className="font-bold text-purple-900 text-2xl">â€œ{finalMessage}â€</span>
          </div>
        )}
      </div>
    </div>
  );
}
